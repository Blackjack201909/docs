# 如何接入音乐喷泉互动点播系统？

## 录入基本信息数据
1. 建立数据库。将喷泉的相关信息录入并上传到系统的云端数据库。
2. 信息数据至少包括：喷泉、场次、媒体、节目、特效参数、水型编组、设备配接、电源开关。
3. 喷泉信息至少包括：名称、封面图片、国家、省份、城市、地址、地理位置坐标、节目类型。
4. 场次信息至少包括：喷泉识别码、开始时间、结束时间、每周重复、每月重复、折扣百分比、取消数组。
5. 媒体信息至少包括：名称、封面图片、出品人、分类、时长、国家。
6. 节目信息至少包括：喷泉识别码、媒体识别码、名称、报幕时长、价格、分类标签、状态。
7. 特效参数至少包括：样式数组、选择数组、幅度、宽度、相位、速度、方向数组、翼数组、组数组。
8. 其他类型数据的描述过于专业化，可能引起读者的严重不适感，在此不赘述。


## 服务器对接喷泉硬件系统的现场控制总线
1. 喷泉硬件系统普遍采用多种现场总线来控制各类设备。一般总线协议有：Art-Net、DMX512、TCP、CAN、Modbus、I<sup>2</sup>C、RS232。从硬件上看相对简单：网口、串口。
2. 只要硬件接口先对接上，然后软件编程接口配置参数连通总线协议。互动点播系统就可以完全接管喷泉硬件，实现有效控制。
3. 从技术难度上来讲：硬件接口对接比较简单，几乎毫无难度。打通总线协议稍微复杂一些，但只要原始资料足够，也就是工作量的问题，多花些时间而已。
4. 由于对接后不再使用原来主控电脑。所以，原主控电脑对节目的诸多限制也就随之消除。
5. 对接后，原来的主控电脑仍然可以控制喷泉系统，只是不能与新系统同时工作而已。
6. 由于新系统要与云端交流数据，因此，必须连接互联网。这也许是与原系统显著的不同。传统的喷泉系统都是本地系统，除非远程控制或传送文件，一般情况下不连接互联网。
7. 测试系统，录入各组水型设备的延时数据。

## 喷泉节目脚本编写并提交
1. 脚本的编写一般放在接入工作的最后。这是互动点播系统对传统喷泉最大的突破之一。
2. 脚本必须关联媒体数据和节目数据。
3. 脚本编写需要媒体的相关素材和参数：歌曲、歌谱、歌词、拍号、拍速、开始小节号、结束小节号。
4. 分段。先分大块：前奏、主歌、副歌、间奏、尾声。再分小段：一般 8 ~ 12 秒左右，大约 2 句歌词，适合喷泉设备的表演。
5. 逐段编写脚本。根据歌曲的长短，一般可分为几十个小段。
6. 脚本一般逐段调试，也可多段一起调试。调试时，音乐始终与分段同步。
7. 脚本完成后，一键提交上云。然后，游客就可以在节目列表中看到并点播。
8. 当节目在现场播放时，现场服务器会实时从云端获取节目和脚本，然后转换为实时数据播放。由于脚本的尺寸极小，下载的时间几乎可以忽略不计。
9. 这样的好处就是，脚本可以随时被修改优化。渐进提高质量，应对客户不断提高的服务要求。
